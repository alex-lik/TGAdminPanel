import requests

# --- –ù–ê–°–¢–†–û–ô–ö–ò ---
# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
BOT_TOKEN = "7723270954:AAFooFxb46jA6EqUXkllrRYeoUaPMG-txJE"
# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –≤–∞—à–µ–≥–æ –∫–∞–Ω–∞–ª–∞. –î–ª—è —á–∏—Å–ª–æ–≤—ã—Ö ID –∫–∞–≤—ã—á–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã.
# –ü—Ä–∏–º–µ—Ä –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞: CHANNEL_ID = "@your_channel_name"
# –ü—Ä–∏–º–µ—Ä –¥–ª—è —á–∞—Å—Ç–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞: CHANNEL_ID = -1001234567890
CHANNEL_ID = -397262379

# --- –°–û–û–ë–©–ï–ù–ò–ï ---
html_message = """<b>–†–æ–±–æ—Ç–∞ –∑ –ø–∞–∫–µ—Ç–∞–º–∏: requirements.txt lock üßæ</b>

<i>–§—ñ–∫—Å–∞—Ü—ñ—è –≤–µ—Ä—Å—ñ–π –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—É. Requirements.txt ‚Äî –±–∞–∑–æ–≤–∏–π —Å–ø–æ—Å—ñ–± "–∑–∞–º–æ—Ä–æ–∑–∏—Ç–∏" —Å—Ç–∞–Ω –ø–∞–∫–µ—Ç—ñ–≤.</i>

<b>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è requirements.txt</b>
‚Ä¢ –í—Ä—É—á–Ω—É: –ø–µ—Ä–µ–ª—ñ—á—É—î–º–æ –ø–∞–∫–µ—Ç–∏ —Ç–∞ –≤–µ—Ä—Å—ñ—ó
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ: pip freeze &gt; requirements.txt
‚Ä¢ –ó —Ö–µ—à–∞–º–∏: pip hash -r requirements.txt
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç:
<pre><code>requests==2.31.0
python-dotenv&gt;=0.19.0,&lt;1.0.0
pytest~=7.4.0  # —Å—É–º—ñ—Å–Ω—ñ –º—ñ–Ω–æ—Ä–Ω—ñ</code></pre>

<b>–¢–∏–ø–∏ —Ñ—ñ–∫—Å–∞—Ü—ñ—ó –≤–µ—Ä—Å—ñ–π</b>
‚Ä¢ == —Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è (–Ω–∞–π–Ω–∞–¥—ñ–π–Ω—ñ—à–∏–π)
‚Ä¢ &gt;= –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è (—Ä–∏–∑–∏–∫–æ–≤–∞–Ω–æ)
‚Ä¢ ~= —Å—É–º—ñ—Å–Ω—ñ –º—ñ–Ω–æ—Ä–Ω—ñ (–∫–æ–º–ø—Ä–æ–º—ñ—Å)
‚Ä¢ != –≤–∏–∫–ª—é—á–∏—Ç–∏ –≤–µ—Ä—Å—ñ—é
‚Ä¢ [extras] –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—ñ—á—ñ

<b>–ü–æ—Ä–∞–¥–∏ —â–æ–¥–æ —Ä–æ–±–æ—Ç–∏</b>
‚Ä¢ –†–æ–∑–¥—ñ–ª—è–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—ñ —Ç–∞ dev-–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚Ä¢ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ constraints.txt –¥–ª—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤
‚Ä¢ –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–¥ —Ñ—ñ–∫—Å–∞—Ü—ñ—î—é
‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –±–µ–∑–ø–µ–∫–∏
‚Ä¢ –¢—Ä–∏–º–∞–π—Ç–µ –≤ git —Ä–∞–∑–æ–º –∑ –∫–æ–¥–æ–º

üí° –í–ø—Ä–∞–≤–∞:
–°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å flask —Ç–∞ requests —Ä—ñ–∑–Ω–∏—Ö –≤–µ—Ä—Å—ñ–π, –∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ requirements.txt —Ç–∞ —Å–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ –Ω–æ–≤—ñ–π –ø–∞–ø—Ü—ñ:

<pre><code>python -m venv env
source env/bin/activate  # –∞–±–æ .envScriptsactivate
pip install flask==2.0.0 requests==2.31.0
pip freeze &gt; requirements.txt
deactivate
# –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–µ –æ—Ç–æ—á–µ–Ω–Ω—è —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å
python -m venv env2
source env2/bin/activate
pip install -r requirements.txt</code></pre>"""

def send_telegram_message():
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –∫–∞–Ω–∞–ª —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º requests.
    """
    if "YOUR_BOT_TOKEN" in BOT_TOKEN:
        print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à BOT_TOKEN –≤ —Ñ–∞–π–ª–µ test_send.py")
        return

    url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
    params = {
        'chat_id': CHANNEL_ID,
        'text': html_message,
        'parse_mode': 'HTML'
    }

    print(f"–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª {CHANNEL_ID}...")
    try:
        response = requests.post(url, json=params)
        # –ü–µ—á–∞—Ç–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        print(f"–û—Ç–≤–µ—Ç –æ—Ç Telegram API: {response.text}")
        response.raise_for_status()  # –í—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ 4xx/5xx

        result = response.json()
        if result.get("ok"):
            message_id = result["result"]["message_id"]
            print(f"–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! Message ID: {message_id}")
        else:
            print(f"Telegram API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: {result.get('description')}")
    except requests.exceptions.HTTPError as e:
        print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ HTTP: {e}")
        print(f"–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: {e.response.text}")
    except requests.exceptions.RequestException as e:
        print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞: {e}")
    except Exception as e:
        print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")


if __name__ == "__main__":
    send_telegram_message()